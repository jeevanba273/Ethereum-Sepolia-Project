<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ethereum - Sepolia Testnet Implementation</title>
    <style>
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      html,
      body {
        min-height: 100%;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(to right, #f7f7f7, #e6e6e6);
        color: #333;
      }

      body {
        padding: 5px;
        padding-bottom: 40px;
        display: flex;
        flex-direction: column;
        align-items: center;
        width: 100%;
        max-width: 100vw;
        overflow-x: hidden;
      }

      #controls {
        position: sticky;
        top: 0;
        width: 100%;
        background: transparent;
        padding: 20px;
        padding-top: 5px;
        z-index: 1000;
        text-align: center;
      }

      h1 {
        font-size: 2.5rem;
        color: #000000;
        margin-bottom: 20px;
      }

      button {
        background-color: #007bff;
        color: #fff;
        border: none;
        border-radius: 8px;
        padding: 15px 30px;
        font-size: 1.2rem;
        cursor: pointer;
        transition: background-color 0.3s, transform 0.3s, box-shadow 0.3s;
        margin: 5px;
      }

      button:hover {
        background-color: #0056b3;
        transform: scale(1.05);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      }

      button:active {
        background-color: #003d80;
        transform: scale(1);
      }

      #outputContainer {
        width: 80%;
        max-width: 1000px;
        position: relative;
        margin-top: 20px;
      }

      #output {
        width: 100%;
        height: 400px;
        border-radius: 10px;
        background-color: #fff;
        box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
        overflow-y: auto;
        padding: 20px;
        padding-top: 10px;
        position: relative;
        font-size: 1.3rem;
        color: #444;
      }

      #output::before {
        content: attr(data-content);
        position: absolute;
        top: 10px;
        left: 20px;
        color: #888;
        font-size: 1.2rem;
        transition: opacity 0.3s;
      }

      #outputWrapper {
        position: relative;
        height: 100%;
      }

      #stopScript7Button {
        position: absolute;
        right: -200px;
        top: 50%;
        transform: translateY(-50%);
        background-color: #dc3545;
        color: white;
        border: none;
        padding: 10px 15px;
        border-radius: 5px;
        cursor: pointer;
        transition: background-color 0.3s;
        z-index: 1000;
      }

      #stopScript7Button:hover {
        background-color: #c82333;
      }

      .line-break {
        margin-bottom: 10px;
      }

      #inputContainer {
        width: 100%;
        max-width: 600px;
        margin: 0 auto 20px;
        position: relative;
      }

      #inputBox,
      #script3InputBox,
      #script4InputBox,
      #script5InputBox,
      #script6InputBox,
      #script7InputBox,
      #script8InputBox {
        display: none;
        margin: 20px 0;
        width: 100%;
        transition: opacity 0.3s;
      }

      #inputBox input,
      #script3InputBox input,
      #script4InputBox input,
      #script5InputBox input,
      #script6InputBox input,
      #script7InputBox input,
      #script8InputBox input {
        padding: 10px;
        font-size: 1rem;
        border: 1px solid #ccc;
        border-radius: 8px;
        margin-right: 10px;
        margin-bottom: 10px;
        width: calc(100% - 20px);
      }

      #inputBox button,
      #script3InputBox button,
      #script4InputBox button,
      #script5InputBox button,
      #script6InputBox button,
      #script7InputBox button,
      #script8InputBox button {
        padding: 10px 20px;
        font-size: 1rem;
        border-radius: 8px;
        background-color: #28a745;
        color: #fff;
        border: none;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        margin-top: 15px;
        width: 40%;
        align-self: center;
        display: block;
        margin-left: auto;
        margin-right: auto;
      }

      #inputBox button:hover,
      #script3InputBox button:hover,
      #script4InputBox button:hover,
      #script5InputBox button:hover,
      #script6InputBox button:hover,
      #script7InputBox button:hover,
      #script8InputBox button:hover {
        background-color: #218838;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        transform: translateY(-2px);
      }

      #inputBox button:active,
      #script3InputBox button:active,
      #script4InputBox button:active,
      #script5InputBox button:active,
      #script6InputBox button:active,
      #script7InputBox button:active,
      #script8InputBox button:active {
        transform: translateY(0);
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      #script3InputBox,
      #script4InputBox,
      #script5InputBox,
      #script6InputBox,
      #script7InputBox,
      #script8InputBox {
        display: none;
        flex-direction: column;
        align-items: center;
      }
    </style>
  </head>
  <body>
    <div id="controls">
      <h1>Ethereum - Sepolia Testnet Implementation</h1>
      <button onclick="startScript(1)">Check Connection</button>
      <button onclick="startScript(2)">Generate Wallet Address</button>
      <button onclick="startScript(3)">Check Wallet Balance</button>
      <button onclick="startScript(4)">Send Transaction</button>
      <button onclick="startScript(5)">Latest Transaction</button>
      <button onclick="startScript(6)">Transactions in Last 20 Blocks</button>
      <button onclick="startScript(7)">Live Track Wallet</button>
      <button onclick="startScript(8)">Verify Transaction Signature</button>
    </div>
    <div id="inputContainer">
      <div id="inputBox">
        <input
          type="text"
          id="infuraProjectId"
          placeholder="Enter Infura Project ID"
        />
        <button onclick="submitProjectId()">Submit Project ID</button>
      </div>
      <div id="script3InputBox">
        <input
          type="text"
          id="script3InfuraProjectId"
          placeholder="Enter Infura Project ID"
        />
        <input
          type="text"
          id="walletAddress"
          placeholder="Enter Wallet Address"
        />
        <button onclick="runScript3()">Check Balance</button>
      </div>
      <div id="script4InputBox">
        <input
          type="text"
          id="script4InfuraProjectId"
          placeholder="Enter Infura Project ID"
        />
        <input
          type="text"
          id="senderAddress"
          placeholder="Enter Sender Address"
        />
        <input type="text" id="privateKey" placeholder="Enter Private Key" />
        <input
          type="text"
          id="receiverAddress"
          placeholder="Enter Receiver Address"
        />
        <button onclick="runScript4()">Send Transaction</button>
      </div>
      <div id="script5InputBox">
        <input
          type="text"
          id="script5InfuraProjectId"
          placeholder="Enter Infura Project ID"
        />
        <input
          type="text"
          id="script5WalletAddress"
          placeholder="Enter Wallet Address"
        />
        <button onclick="runScript5()">Find Latest Transaction</button>
      </div>
      <div id="script6InputBox">
        <input
          type="text"
          id="script6InfuraProjectId"
          placeholder="Enter Infura Project ID"
        />
        <input
          type="text"
          id="script6WalletAddress"
          placeholder="Enter Wallet Address"
        />
        <button onclick="runScript6()">Check Transactions</button>
      </div>
      <div id="script7InputBox">
        <input
          type="text"
          id="script7InfuraProjectId"
          placeholder="Enter Infura Project ID"
        />
        <input
          type="text"
          id="script7WalletAddress"
          placeholder="Enter Wallet Address"
        />
        <button onclick="runScript7()">Monitor Transactions</button>
      </div>
      <div id="script8InputBox">
        <input
          type="text"
          id="script8InfuraProjectId"
          placeholder="Enter Infura Project ID"
        />
        <input
          type="text"
          id="script8PrivateKey"
          placeholder="Enter Sender Private Key"
        />
        <input
          type="text"
          id="script8ReceiverAddress"
          placeholder="Enter Receiver Address"
        />
        <button onclick="runScript8()">Verify Signature</button>
      </div>
    </div>
    <div id="outputContainer">
      <div id="outputWrapper">
        <div id="output" data-content="Running..."></div>
        <button id="stopScript7Button" onclick="stopScript7()">
          Stop Monitoring
        </button>
      </div>
    </div>
    <script>
      let currentScriptId = null;
      let websocket = null;

      function startScript(scriptId) {
        currentScriptId = scriptId;
        clearOutput();
        clearInputs();

        document.getElementById("inputBox").style.display = "none";
        document.getElementById("script3InputBox").style.display = "none";
        document.getElementById("script4InputBox").style.display = "none";
        document.getElementById("script5InputBox").style.display = "none";
        document.getElementById("script6InputBox").style.display = "none";
        document.getElementById("script7InputBox").style.display = "none";
        document.getElementById("script8InputBox").style.display = "none";

        if (scriptId === 1) {
          document.getElementById("inputBox").style.display = "block";
        } else if (scriptId === 3) {
          document.getElementById("script3InputBox").style.display = "flex";
        } else if (scriptId === 4) {
          document.getElementById("script4InputBox").style.display = "flex";
        } else if (scriptId === 5) {
          document.getElementById("script5InputBox").style.display = "flex";
        } else if (scriptId === 6) {
          document.getElementById("script6InputBox").style.display = "flex";
        } else if (scriptId === 7) {
          document.getElementById("script7InputBox").style.display = "flex";
        } else if (scriptId === 8) {
          document.getElementById("script8InputBox").style.display = "flex";
        } else {
          document
            .getElementById("output")
            .setAttribute("data-content", "Running...");
          openConnectionAndSendRequest(scriptId);
        }

        document.getElementById("output").classList.remove("hidden");
        handleScroll();
      }

      function clearOutput() {
        document.getElementById("output").innerHTML = "";
      }

      function clearInputs() {
        document.querySelectorAll("#inputContainer input").forEach((input) => {
          input.value = "";
        });
      }

      function submitProjectId() {
        const infuraProjectId =
          document.getElementById("infuraProjectId").value;
        if (!infuraProjectId) {
          alert("Please enter the Infura Project ID.");
          return;
        }
        localStorage.setItem("infuraProjectId", infuraProjectId);
        startScript(currentScriptId);
      }

      function runScript3() {
        const infuraProjectId = document.getElementById(
          "script3InfuraProjectId"
        ).value;
        const walletAddress = document.getElementById("walletAddress").value;
        if (!infuraProjectId || !walletAddress) {
          alert("Please enter both Infura Project ID and Wallet Address.");
          return;
        }
        openConnectionAndSendRequest(3, infuraProjectId, walletAddress);
      }

      function runScript4() {
        const infuraProjectId = document.getElementById(
          "script4InfuraProjectId"
        ).value;
        const senderAddress = document.getElementById("senderAddress").value;
        const privateKey = document.getElementById("privateKey").value;
        const receiverAddress =
          document.getElementById("receiverAddress").value;
        if (
          !infuraProjectId ||
          !senderAddress ||
          !privateKey ||
          !receiverAddress
        ) {
          alert("Please enter all fields.");
          return;
        }
        openConnectionAndSendRequest(
          4,
          infuraProjectId,
          senderAddress,
          privateKey,
          receiverAddress
        );
      }

      function runScript5() {
        const infuraProjectId = document.getElementById(
          "script5InfuraProjectId"
        ).value;
        const walletAddress = document.getElementById(
          "script5WalletAddress"
        ).value;
        if (!infuraProjectId || !walletAddress) {
          alert("Please enter both Infura Project ID and Wallet Address.");
          return;
        }
        openConnectionAndSendRequest(5, infuraProjectId, walletAddress);
      }

      function runScript6() {
        const infuraProjectId = document.getElementById(
          "script6InfuraProjectId"
        ).value;
        const walletAddress = document.getElementById(
          "script6WalletAddress"
        ).value;
        if (!infuraProjectId || !walletAddress) {
          alert("Please enter both Infura Project ID and Wallet Address.");
          return;
        }
        openConnectionAndSendRequest(6, infuraProjectId, walletAddress);
      }

      function runScript7() {
        const infuraProjectId = document.getElementById(
          "script7InfuraProjectId"
        ).value;
        const walletAddress = document.getElementById(
          "script7WalletAddress"
        ).value;
        if (!infuraProjectId || !walletAddress) {
          alert("Please enter both Infura Project ID and Wallet Address.");
          return;
        }
        openConnectionAndSendRequest(7, infuraProjectId, walletAddress);
      }

      function runScript8() {
        const infuraProjectId = document.getElementById(
          "script8InfuraProjectId"
        ).value;
        const privateKey = document.getElementById("script8PrivateKey").value;
        const receiverAddress = document.getElementById(
          "script8ReceiverAddress"
        ).value;
        if (!infuraProjectId || !privateKey || !receiverAddress) {
          alert("Please enter all fields.");
          return;
        }
        openConnectionAndSendRequest(
          8,
          infuraProjectId,
          privateKey,
          receiverAddress
        );
      }

      function stopScript7() {
        if (websocket) {
          websocket.close();
          websocket = null;
        }
        document
          .getElementById("output")
          .setAttribute("data-content", "Monitoring stopped.");
      }

      function openConnectionAndSendRequest(scriptId, ...params) {
        const infuraProjectId =
          localStorage.getItem("infuraProjectId") || params[0];
        const url = `wss://sepolia.infura.io/ws/v3/${infuraProjectId}`;
        websocket = new WebSocket(url);

        websocket.onopen = () => {
          appendToOutput(`Connected to ${url}`);
          // Add specific messages for each script
          if (scriptId === 1) {
            websocket.send(
              JSON.stringify({
                jsonrpc: "2.0",
                method: "eth_blockNumber",
                params: [],
                id: 1,
              })
            );
          } else if (scriptId === 3) {
            websocket.send(
              JSON.stringify({
                jsonrpc: "2.0",
                method: "eth_getBalance",
                params: [params[1], "latest"],
                id: 3,
              })
            );
          } else if (scriptId === 4) {
            // Implementation for sending transactions
          } else if (scriptId === 5) {
            websocket.send(
              JSON.stringify({
                jsonrpc: "2.0",
                method: "eth_getBlockByNumber",
                params: ["latest", true],
                id: 5,
              })
            );
          } else if (scriptId === 6) {
            // Implementation for checking transactions in last 20 blocks
          } else if (scriptId === 7) {
            // Implementation for live tracking wallet
          } else if (scriptId === 8) {
            // Implementation for verifying transaction signature
          }
        };

        websocket.onmessage = (event) => {
          appendToOutput(event.data);
          handleScroll();
        };

        websocket.onclose = () => {
          appendToOutput("Connection closed.");
        };

        websocket.onerror = (error) => {
          appendToOutput("WebSocket Error: " + error.message);
        };
      }

      function appendToOutput(message) {
        const output = document.getElementById("output");
        output.innerHTML += message + "<br/>";
      }

      function handleScroll() {
        const output = document.getElementById("output");
        output.scrollTop = output.scrollHeight;
      }
    </script>
  </body>
</html>
